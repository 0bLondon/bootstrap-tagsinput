/*
 * bootstrap-tagsinput v0.0.1 by Tim Schlechter
 * https://raw.github.com/TimSchlechter/bootstrap-tagsinput/master/LICENSE
 */
!function(a){"use strict";function b(b){this.options={},this.$element=a(b),this.multiple="SELECT"===b.tagName&&b.getAttribute("multiple"),this.$container=a('<div class="bootstrap-tagsinput"><input size="1" type="text" /></div>'),this.$element.hide(),this.$element.after(this.$container),this.build()}function c(a){return a?g.text(a).html():""}function d(a){var b=0;if(document.selection){a.focus();var c=document.selection.createRange();c.moveStart("character",-a.value.length),b=c.text.length}else(a.selectionStart||"0"==a.selectionStart)&&(b=a.selectionStart);return b}var e='<span class="tag label"><span class="text"></span><i class="icon-white icon-remove" data-role="remove"></i></span>';b.prototype={constructor:b,addItem:function(b,d){var f=a(e);a(".text",f).text(b),f.data("item",b),a("input",this.$container).before(f),"SELECT"===this.$element[0].tagName&&this.$element.append(a('<option value="'+c(b)+'" selected>'+c(b)+"</option>")),d||this.$element.val(this.getValueFromTags())},removeItem:function(b,c){a(".tag",this.$container).filter(function(){return a(this).data("item")===b}).remove(),c||this.$element.val(this.getValueFromTags())},getValueFromTags:function(){return this.getItems()},getItems:function(){return a.map(a(".tag",this.$container),function(b){return a(b).data("item")})},build:function(){this.$container.on("keydown","input",a.proxy(function(b){var c=a(b.target);switch(b.which){case 8:if(0===d(c[0])){var e=this.getItems();e[0]&&this.removeItem(e[e.length-1])}break;case 37:var f=c.prev();0===c.val().length&&f[0]&&(f.before(c),c.focus());break;case 13:this.addItem(c.val()),c.val("")}c.attr("size",Math.max(1,c.val().length))},this)),this.$container.on("click","[data-role=remove]",a.proxy(function(b){var c=a(b.target).closest(".tag");this.removeItem(c.data("item"))},this))},destroy:function(){this.$container.off("keypress","input"),this.$container.off("click","[data-role=remove]"),this.$container.remove(),this.$element.show()}},a.fn.tagsinput=function(c,d){var e=[];return this.each(function(){var f=a(this).data("tagsinput");if(!f)return a(this).data("tagsinput",f=new b(this,c)),e.push(f),void 0;var g;switch(c){case"add":g=f.addItem(d);break;case"remove":g=f.removeItem(d);break;case"destroy":g=f.destroy();break;case"items":g=f.getItems()}void 0!==g&&e.push(g)}),"string"==typeof c?e.length>1?e:e[0]:e},a.fn.tagsinput.Constructor=b;var f=a.fn.val;a.fn.val=function(b){return arguments.length?(this.each(function(){var c=a(this).data("tagsinput"),d=b;c&&("string"!=typeof d||this.multiple||(d=d.split(",")),a.each(a.makeArray(d),function(a,b){c.addItem(b,!0)}))}),f.call(this,b)):f.call(this)};var g=a("<div />");a(function(){a("input[data-role=tagsinput], select[data-role=tagsinput]").tagsinput()})}(window.jQuery);