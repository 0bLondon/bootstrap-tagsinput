/*
 * bootstrap-tagsinput v0.0.1 by Tim Schlechter
 * https://raw.github.com/TimSchlechter/bootstrap-tagsinput/master/LICENSE
 */
!function(a){"use strict";function b(b,c){this.$element=a(b),this.multiple="SELECT"===b.tagName&&b.getAttribute("multiple"),this.$container=a('<div class="bootstrap-tagsinput"><input size="1" type="text" /></div>'),this.$element.hide(),this.$element.after(this.$container),this.build(c)}function c(a,b){if("function"!=typeof a[b]){var c=a[b];a[b]=function(a){return a[c]}}}function d(a){return a?h.text(a).html():""}function e(a){var b=0;if(document.selection){a.focus();var c=document.selection.createRange();c.moveStart("character",-a.value.length),b=c.text.length}else(a.selectionStart||"0"==a.selectionStart)&&(b=a.selectionStart);return b}var f={tagClass:"badge badge-info",itemValue:function(a){return a?a.toString():a},itemText:function(a){return this.itemValue(a)}};b.prototype={constructor:b,addItem:function(b){if(b===!1||b){if("object"==typeof b&&this.options.itemValue===f.itemValue)throw"Can't add objects when itemValue option is not set";if(!b.toString().match(/^\s*$/)&&-1===a.inArray(b,this.getItems())){var c=a('<span class="tag '+d(this.options.tagClass)+'"><span class="text"></span><i class="icon-white icon-remove" data-role="remove"></i></span>');a(".text",c).text(this.options.itemText(b)),c.data("item",b),a("input",this.$container).before(c),"SELECT"===this.$element[0].tagName&&this.$element.append(a('<option value="'+d(this.options.itemValue(b))+'" selected>'+d(b)+"</option>")),this.$element.val(this.getValueFromTags(),!0)}}},removeItem:function(b){a(".tag",this.$container).filter(function(){return a(this).data("item")===b}).remove(),this.$element.val(this.getValueFromTags(),!0)},getValueFromTags:function(){var b=this.options;return a.map(this.getItems(),function(a){return b.itemValue(a)})},getItems:function(){return a.map(a(".tag",this.$container),function(b){return a(b).data("item")})},build:function(b){this.options=a.extend({},f,b),c(this.options,"itemValue"),c(this.options,"itemText"),this.$container.on("click",a.proxy(function(){a("input",this.$container).focus()},this)),this.$container.on("keydown","input",a.proxy(function(b){var c=a(b.target);switch(b.which){case 8:if(0===e(c[0])){var d=this.getItems();d[0]&&this.removeItem(d[d.length-1])}break;case 37:var f=c.prev();0===c.val().length&&f[0]&&(f.before(c),c.focus());break;case 39:var g=c.next();0===c.val().length&&g[0]&&(g.after(c),c.focus());break;case 13:this.addItem(c.val()),c.val("")}c.attr("size",Math.max(1,c.val().length))},this)),this.$container.on("click","[data-role=remove]",a.proxy(function(b){var c=a(b.target).closest(".tag");this.removeItem(c.data("item"))},this))},destroy:function(){this.$container.off("keypress","input"),this.$container.off("click","[data-role=remove]"),this.$container.remove(),this.$element.show()}},a.fn.tagsinput=function(c,d){var e=[];return this.each(function(){var f=a(this).data("tagsinput");if(!f)return f=new b(this,c),a(this).data("tagsinput",f),e.push(f),a(this).val(a(this).val()),void 0;var g;switch(c){case"add":g=f.addItem(d);break;case"remove":g=f.removeItem(d);break;case"destroy":g=f.destroy();break;case"items":g=f.getItems()}void 0!==g&&e.push(g)}),"string"==typeof c?e.length>1?e:e[0]:e},a.fn.tagsinput.Constructor=b;var g=a.fn.val;a.fn.val=function(b,c){return arguments.length?(c||this.each(function(){var c=a(this).data("tagsinput"),d=b;c&&("string"!=typeof d||this.multiple||(d=d.split(",")),a.each(a.makeArray(d),function(a,b){c.addItem(b)}))}),g.call(this,b)):g.call(this)};var h=a("<div />");a(function(){a("input[data-role=tagsinput], select[data-role=tagsinput]").tagsinput()})}(window.jQuery);